= form_for @diagram do |f|
  - if @diagram.errors.any?
    #error_explanation
      %h2= "#{pluralize(@diagram.errors.count, "error")} prohibited this diagram from being saved:"
      %ul
        - @diagram.errors.full_messages.each do |msg|
          %li= msg

  .field
    = f.label :name
    = f.text_field :name

  .field
    = f.label :category
    = f.text_field :category

  .field
    = f.label :data_format
    = f.select :data_format, options_for_select(["json-individual", "csv-individual"], :selected => "json-individual") #,"json-aggregate", "csv-aggregate"]
    = link_to "Format Description", "#"

  .field
    = f.fields_for :data_files do |builder|
      = render "data_file_form", :f => builder

  .actions
    = f.submit 'Save'

:javascript
  //TODO: Hide second file field and set labels according to data_format.  Show second file field and change labels when data_format is changed.\
  window.onload = function(){
    var format_descriptions = {

    }
    
    $("#diagram_data_format").change(function(){
      console.log("people changes");
    });

    $("#diagram_data_format").change();
  }